# Swagger API ë¬¸ì„œ ì‚¬ìš© ê°€ì´ë“œ

## ğŸ“‹ ëª©ì°¨

1. [Swaggerë€?](#swaggerë€)
2. [Swagger ì ‘ê·¼ ë°©ë²•](#swagger-ì ‘ê·¼-ë°©ë²•)
3. [ê¸°ë³¸ ì‚¬ìš©ë²•](#ê¸°ë³¸-ì‚¬ìš©ë²•)
4. [ì¸ì¦ ì„¤ì • (JWT)](#ì¸ì¦-ì„¤ì •-jwt)
5. [API í…ŒìŠ¤íŠ¸ ë°©ë²•](#api-í…ŒìŠ¤íŠ¸-ë°©ë²•)
6. [í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìë¥¼ ìœ„í•œ íŒ](#í”„ë¡ íŠ¸ì—”ë“œ-ê°œë°œìë¥¼-ìœ„í•œ-íŒ)

---

## Swaggerë€?

SwaggerëŠ” **API ë¬¸ì„œí™” ë° í…ŒìŠ¤íŠ¸ ë„êµ¬**ì…ë‹ˆë‹¤. ë‹¤ìŒê³¼ ê°™ì€ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤:

- âœ… ëª¨ë“  API ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡ í™•ì¸
- âœ… ìš”ì²­/ì‘ë‹µ ìŠ¤í‚¤ë§ˆ í™•ì¸
- âœ… ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ API í…ŒìŠ¤íŠ¸
- âœ… ì½”ë“œ ìƒì„± (TypeScript, JavaScript ë“±)

---

## Swagger ì ‘ê·¼ ë°©ë²•

### ë¡œì»¬ ê°œë°œ í™˜ê²½

ì„œë²„ë¥¼ ì‹¤í–‰í•œ í›„ ë‹¤ìŒ URLë¡œ ì ‘ì†:

```
http://localhost:3001/api
```

### í”„ë¡œë•ì…˜ í™˜ê²½ (Render ë°°í¬ í›„)

```
https://your-app.onrender.com/api
```

---

## ê¸°ë³¸ ì‚¬ìš©ë²•

### 1. Swagger UI í™”ë©´ êµ¬ì„±

Swagger UIëŠ” ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  í—¬ìŠ¤ì¥ íšŒì›ê´€ë¦¬ ì‹œìŠ¤í…œ API              â”‚
â”‚  [Authorize] ë²„íŠ¼                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ auth (ì¸ì¦ ê´€ë ¨ API)                â”‚
â”‚    â”œ POST /api/auth/login               â”‚
â”‚    â”œ POST /api/auth/register            â”‚
â”‚    â”œ GET  /api/auth/session             â”‚
â”‚    â”” POST /api/auth/logout              â”‚
â”‚                                         â”‚
â”‚  ğŸ“ members (íšŒì› ê´€ë¦¬ API)             â”‚
â”‚    â”œ GET    /api/members                â”‚
â”‚    â”œ POST   /api/members                â”‚
â”‚    â”œ GET    /api/members/:id            â”‚
â”‚    â”” ...                                â”‚
â”‚                                         â”‚
â”‚  ğŸ“ assessments (í‰ê°€ ì‹œìŠ¤í…œ API)       â”‚
â”‚  ğŸ“ abilities (ëŠ¥ë ¥ì¹˜ API)              â”‚
â”‚  ğŸ“ injuries (ë¶€ìƒ ê´€ë¦¬ API)            â”‚
â”‚  ğŸ“ analytics (ë¶„ì„ API)                â”‚
â”‚  ğŸ“ insights (ì¸ì‚¬ì´íŠ¸ API)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. API ì—”ë“œí¬ì¸íŠ¸ í™•ì¸

1. ì™¼ìª½ ì‚¬ì´ë“œë°”ì—ì„œ ì›í•˜ëŠ” API ê·¸ë£¹ í´ë¦­
2. ì—”ë“œí¬ì¸íŠ¸ë¥¼ í´ë¦­í•˜ë©´ ìƒì„¸ ì •ë³´ê°€ í¼ì³ì§
3. **Parameters**, **Request body**, **Responses** í™•ì¸ ê°€ëŠ¥

### 3. API ìƒì„¸ ì •ë³´ ë³´ê¸°

ê° ì—”ë“œí¬ì¸íŠ¸ë¥¼ í´ë¦­í•˜ë©´ ë‹¤ìŒ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- **Description**: API ì„¤ëª…
- **Parameters**: ê²½ë¡œ íŒŒë¼ë¯¸í„°, ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°
- **Request body**: ìš”ì²­ ë³¸ë¬¸ ìŠ¤í‚¤ë§ˆ ë° ì˜ˆì‹œ
- **Responses**: ì‘ë‹µ ì½”ë“œ ë° ì‘ë‹µ ìŠ¤í‚¤ë§ˆ

---

## ì¸ì¦ ì„¤ì • (JWT)

ëŒ€ë¶€ë¶„ì˜ APIëŠ” JWT í† í°ì´ í•„ìš”í•©ë‹ˆë‹¤. Swaggerì—ì„œ ì¸ì¦ì„ ì„¤ì •í•˜ëŠ” ë°©ë²•:

### 1. Authorize ë²„íŠ¼ í´ë¦­

Swagger UI ìš°ì¸¡ ìƒë‹¨ì˜ **"Authorize"** ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.

### 2. JWT í† í° ì…ë ¥

ë‹¤ìŒê³¼ ê°™ì€ íŒì—…ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Available authorizations          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  JWT-auth                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Value:                      â”‚   â”‚
â”‚  â”‚ [ì—¬ê¸°ì— í† í° ì…ë ¥]            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  [Authorize] [Close]                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Value** í•„ë“œì— JWT í† í°ì„ ì…ë ¥í•©ë‹ˆë‹¤.

### 3. í† í° ì–»ëŠ” ë°©ë²•

#### ë°©ë²• 1: ë¡œê·¸ì¸ API ì‚¬ìš©

1. `POST /api/auth/login` ì—”ë“œí¬ì¸íŠ¸ í´ë¦­
2. **"Try it out"** ë²„íŠ¼ í´ë¦­
3. Request bodyì— ë¡œê·¸ì¸ ì •ë³´ ì…ë ¥:

```json
{
	"email": "user@example.com",
	"password": "password123"
}
```

4. **"Execute"** ë²„íŠ¼ í´ë¦­
5. ì‘ë‹µì—ì„œ `accessToken` ë³µì‚¬

#### ë°©ë²• 2: ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ ì‚¬ìš©

1. ë¸Œë¼ìš°ì €ì—ì„œ ë¡œê·¸ì¸ API í˜¸ì¶œ
2. ê°œë°œì ë„êµ¬ (F12) â†’ Network íƒ­
3. ì‘ë‹µì—ì„œ `accessToken` ë³µì‚¬

### 4. í† í° ì…ë ¥ ë° ì €ì¥

1. ë³µì‚¬í•œ í† í°ì„ **Value** í•„ë“œì— ë¶™ì—¬ë„£ê¸°
2. **"Authorize"** ë²„íŠ¼ í´ë¦­
3. **"Close"** ë²„íŠ¼ í´ë¦­

ì´ì œ ëª¨ë“  API ìš”ì²­ì— ìë™ìœ¼ë¡œ í† í°ì´ í¬í•¨ë©ë‹ˆë‹¤!

> **ì°¸ê³ **: í† í°ì€ ë¸Œë¼ìš°ì €ì— ì €ì¥ë˜ë¯€ë¡œ ìƒˆë¡œê³ ì¹¨í•´ë„ ìœ ì§€ë©ë‹ˆë‹¤. (ë‹¨, ë¸Œë¼ìš°ì € ìºì‹œë¥¼ ì§€ìš°ë©´ ì‚¬ë¼ì§‘ë‹ˆë‹¤)

---

## API í…ŒìŠ¤íŠ¸ ë°©ë²•

### 1. ì—”ë“œí¬ì¸íŠ¸ ì„ íƒ

í…ŒìŠ¤íŠ¸í•˜ê³  ì‹¶ì€ API ì—”ë“œí¬ì¸íŠ¸ë¥¼ í´ë¦­í•©ë‹ˆë‹¤.

ì˜ˆ: `POST /api/members` (íšŒì› ë“±ë¡)

### 2. Try it out í´ë¦­

**"Try it out"** ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì…ë ¥ í•„ë“œê°€ í™œì„±í™”ë©ë‹ˆë‹¤.

### 3. íŒŒë¼ë¯¸í„° ì…ë ¥

#### ê²½ë¡œ íŒŒë¼ë¯¸í„° (Path Parameters)

URLì— í¬í•¨ë˜ëŠ” íŒŒë¼ë¯¸í„°ì…ë‹ˆë‹¤.

ì˜ˆ: `GET /api/members/:id`

- `id`: íšŒì› UUID ì…ë ¥

#### ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° (Query Parameters)

URL ë’¤ì— `?key=value` í˜•ì‹ìœ¼ë¡œ ì¶”ê°€ë˜ëŠ” íŒŒë¼ë¯¸í„°ì…ë‹ˆë‹¤.

ì˜ˆ: `GET /api/members/:memberId/abilities/compare?prev=1`

- `prev`: ë¹„êµí•  ì´ì „ í‰ê°€ ê°œìˆ˜ (ê¸°ë³¸ê°’: 1)

#### Request Body

POST, PUT ìš”ì²­ ì‹œ ë³¸ë¬¸ì— í¬í•¨ë˜ëŠ” ë°ì´í„°ì…ë‹ˆë‹¤.

ì˜ˆ: íšŒì› ë“±ë¡

```json
{
	"name": "í™ê¸¸ë™",
	"email": "hong@example.com",
	"phone": "010-1234-5678",
	"joinDate": "2024-01-15",
	"status": "ACTIVE"
}
```

### 4. Execute í´ë¦­

**"Execute"** ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ APIê°€ í˜¸ì¶œë©ë‹ˆë‹¤.

### 5. ì‘ë‹µ í™•ì¸

ì‘ë‹µ ì„¹ì…˜ì—ì„œ ë‹¤ìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- **Response Code**: HTTP ìƒíƒœ ì½”ë“œ (200, 201, 400, 401 ë“±)
- **Response Body**: ì‹¤ì œ ì‘ë‹µ ë°ì´í„°
- **Response Headers**: ì‘ë‹µ í—¤ë” ì •ë³´

---

## í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìë¥¼ ìœ„í•œ íŒ

### 1. API ìŠ¤í‚¤ë§ˆ í™•ì¸

Swaggerì—ì„œ ê° APIì˜ ìš”ì²­/ì‘ë‹µ ìŠ¤í‚¤ë§ˆë¥¼ í™•ì¸í•˜ì—¬:

- TypeScript íƒ€ì… ì •ì˜ ìƒì„±
- API í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ ì‘ì„±
- ë°ì´í„° êµ¬ì¡° ì´í•´

### 2. ì½”ë“œ ìƒì„± ë„êµ¬ ì‚¬ìš©

SwaggerëŠ” OpenAPI ìŠ¤í™ì„ ì œê³µí•˜ë¯€ë¡œ, ë‹¤ìŒ ë„êµ¬ë¡œ ì½”ë“œë¥¼ ìë™ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

#### OpenAPI JSON ë‹¤ìš´ë¡œë“œ

Swagger UI í•˜ë‹¨ì— ìˆëŠ” JSON ë§í¬ë¥¼ í´ë¦­í•˜ë©´ OpenAPI ìŠ¤í™ì„ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```
http://localhost:3001/api-json
```

#### ì½”ë“œ ìƒì„± ë„êµ¬

- **openapi-generator**: Java, TypeScript, Python ë“± ë‹¤ì–‘í•œ ì–¸ì–´ ì§€ì›
- **swagger-codegen**: ìœ ì‚¬í•œ ê¸°ëŠ¥ ì œê³µ

**ì˜ˆì‹œ (TypeScript í´ë¼ì´ì–¸íŠ¸ ìƒì„±):**

```bash
npx @openapitools/openapi-generator-cli generate \
  -i http://localhost:3001/api-json \
  -g typescript-axios \
  -o ./src/api-client
```

### 3. ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ

#### Reactì—ì„œ ì‚¬ìš©í•˜ê¸°

```typescript
// 1. Swaggerì—ì„œ í™•ì¸í•œ ìŠ¤í‚¤ë§ˆ ê¸°ë°˜ìœ¼ë¡œ íƒ€ì… ì •ì˜
interface LoginRequest {
	email: string;
	password: string;
}

interface LoginResponse {
	success: boolean;
	data: {
		accessToken: string;
		user: {
			id: string;
			email: string;
			name: string;
			role: string;
		};
	};
	message: string;
}

// 2. API í˜¸ì¶œ í•¨ìˆ˜ ì‘ì„±
async function login(data: LoginRequest): Promise<LoginResponse> {
	const response = await fetch("http://localhost:3001/api/auth/login", {
		method: "POST",
		headers: {
			"Content-Type": "application/json",
		},
		body: JSON.stringify(data),
	});

	return response.json();
}

// 3. ì‚¬ìš©
const result = await login({
	email: "user@example.com",
	password: "password123",
});

localStorage.setItem("token", result.data.accessToken);
```

### 4. ì—ëŸ¬ ì‘ë‹µ í™•ì¸

Swaggerì—ì„œ ê° APIì˜ ì—ëŸ¬ ì‘ë‹µë„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- **400 Bad Request**: ì˜ëª»ëœ ìš”ì²­
- **401 Unauthorized**: ì¸ì¦ ì‹¤íŒ¨
- **403 Forbidden**: ê¶Œí•œ ì—†ìŒ
- **404 Not Found**: ë¦¬ì†ŒìŠ¤ ì—†ìŒ

ì—ëŸ¬ ì‘ë‹µ í˜•ì‹:

```json
{
	"success": false,
	"error": {
		"code": "MEMBER_NOT_FOUND",
		"message": "íšŒì›ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.",
		"details": {
			"memberId": "invalid-id"
		}
	}
}
```

### 5. ì¸ì¦ í† í° ê´€ë¦¬

í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì¸ì¦ í† í°ì„ ê´€ë¦¬í•˜ëŠ” ë°©ë²•:

```typescript
// í† í° ì €ì¥
localStorage.setItem("token", accessToken);

// API ìš”ì²­ ì‹œ í† í° í¬í•¨
const response = await fetch("http://localhost:3001/api/members", {
	headers: {
		Authorization: `Bearer ${localStorage.getItem("token")}`,
		"Content-Type": "application/json",
	},
});
```

---

## ì‹¤ì „ ì˜ˆì œ: íšŒì› ë“±ë¡ API í…ŒìŠ¤íŠ¸

### 1ë‹¨ê³„: ì¸ì¦ ì„¤ì •

1. `POST /api/auth/login` í´ë¦­
2. **Try it out** í´ë¦­
3. ë¡œê·¸ì¸ ì •ë³´ ì…ë ¥:

```json
{
	"email": "admin@example.com",
	"password": "admin123"
}
```

4. **Execute** í´ë¦­
5. ì‘ë‹µì—ì„œ `accessToken` ë³µì‚¬
6. ìš°ì¸¡ ìƒë‹¨ **Authorize** í´ë¦­
7. í† í° ë¶™ì—¬ë„£ê¸° í›„ **Authorize** í´ë¦­

### 2ë‹¨ê³„: íšŒì› ë“±ë¡

1. `POST /api/members` í´ë¦­
2. **Try it out** í´ë¦­
3. Request body ì…ë ¥:

```json
{
	"name": "í™ê¸¸ë™",
	"email": "hong@example.com",
	"phone": "010-1234-5678",
	"joinDate": "2024-01-15",
	"status": "ACTIVE"
}
```

4. **Execute** í´ë¦­
5. ì‘ë‹µ í™•ì¸:

```json
{
  "success": true,
  "data": {
    "id": "uuid",
    "name": "í™ê¸¸ë™",
    "email": "hong@example.com",
    ...
  },
  "message": "íšŒì› ë“±ë¡ ì„±ê³µ"
}
```

---

## ë¬¸ì œ í•´ê²°

### Q: Authorize ë²„íŠ¼ì´ ë³´ì´ì§€ ì•Šì•„ìš”

A: JWT ì¸ì¦ì´ í•„ìš”í•œ APIê°€ ì—†ê±°ë‚˜, Swagger ì„¤ì •ì— ë¬¸ì œê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°±ì—”ë“œ ê°œë°œìì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”.

### Q: 401 Unauthorized ì—ëŸ¬ê°€ ë‚˜ì™€ìš”

A:

1. **Authorize** ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ í† í°ì´ ì œëŒ€ë¡œ ì„¤ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸
2. í† í°ì´ ë§Œë£Œë˜ì—ˆì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë‹¤ì‹œ ë¡œê·¸ì¸í•˜ì—¬ ìƒˆ í† í° ë°œê¸‰
3. í† í° í˜•ì‹ì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸ (`Bearer {token}` í˜•ì‹)

### Q: 403 Forbidden ì—ëŸ¬ê°€ ë‚˜ì™€ìš”

A: í•´ë‹¹ APIì— ì ‘ê·¼í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤. ADMIN ë˜ëŠ” TRAINER ê¶Œí•œì´ í•„ìš”í•œ APIì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Q: CORS ì—ëŸ¬ê°€ ë‚˜ì™€ìš”

A: ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ Swaggerë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° CORS ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. í”„ë¡ íŠ¸ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ APIë¥¼ í˜¸ì¶œí•  ë•Œ CORS ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤ë©´, ë°±ì—”ë“œì˜ `FRONTEND_URL` í™˜ê²½ ë³€ìˆ˜ë¥¼ í™•ì¸í•˜ì„¸ìš”.

---

## ì¶”ê°€ ë¦¬ì†ŒìŠ¤

- [Swagger ê³µì‹ ë¬¸ì„œ](https://swagger.io/docs/)
- [OpenAPI ìŠ¤í™](https://swagger.io/specification/)
- [NestJS Swagger ë¬¸ì„œ](https://docs.nestjs.com/openapi/introduction)

---

## ë¬¸ì˜

Swagger ì‚¬ìš© ì¤‘ ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ë°±ì—”ë“œ ê°œë°œìì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”!
