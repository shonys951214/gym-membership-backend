# í‰ê°€ ì‹œìŠ¤í…œ DB ì—…ë°ì´íŠ¸ ì™„ë£Œ ìš”ì•½

## âœ… ì™„ë£Œëœ ì‘ì—… (2024-01-XX)

### 1. DB ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ

ë‹¤ìŒ ë§ˆì´ê·¸ë ˆì´ì…˜ì´ DBeaverë¥¼ í†µí•´ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤:

1. âœ… `assessment_items.details` í•„ë“œ ì¶”ê°€ (JSONB)
2. âœ… `assessment_items.value`, `unit`, `score` í•„ë“œ nullable ì²˜ë¦¬
3. âœ… `body_composition_standards` í…Œì´ë¸” ìƒì„± (ì²´ì„±ë¶„ í‰ê°€ ê¸°ì¤€í‘œ)
4. âœ… `assessment_grade_constants` í…Œì´ë¸” ìƒì„± (í‰ê°€ ë“±ê¸‰ ìƒìˆ˜)
5. âœ… `assessment_category_scores` í…Œì´ë¸” ìƒì„± (ì¹´í…Œê³ ë¦¬ë³„ ë“±ê¸‰-ì ìˆ˜ ë§¤í•‘)
6. âœ… `flexibility_item_weights` í…Œì´ë¸” ìƒì„± (ìœ ì—°ì„± í•­ëª©ë³„ ê°€ì¤‘ì¹˜)
7. âœ… `flexibility_grade_thresholds` í…Œì´ë¸” ìƒì„± (ìœ ì—°ì„± ë“±ê¸‰ íŒì • ê¸°ì¤€)

### 2. Entity ìˆ˜ì • ì™„ë£Œ

- âœ… `src/entities/assessment-item.entity.ts`
  - `details` JSONB í•„ë“œ ì¶”ê°€
  - `value`, `unit`, `score` í•„ë“œë¥¼ nullableë¡œ ë³€ê²½
  - TypeScript íƒ€ì… ì •ì˜ ì¶”ê°€

### 3. DTO ìˆ˜ì • ì™„ë£Œ

- âœ… `src/modules/assessments/dto/create-assessment-item.dto.ts`
  - `value`, `unit` í•„ë“œë¥¼ optionalë¡œ ë³€ê²½
  - `details` í•„ë“œ ì¶”ê°€ (ë“±ê¸‰, ê´€ì°° í¬ì¸íŠ¸, ëŒ€ì²´ í•­ëª© ì •ë³´ ë“±)

### 4. Service ìˆ˜ì • ì™„ë£Œ

- âœ… `src/modules/assessments/assessments.service.ts`
  - `create` ë©”ì„œë“œì—ì„œ `details` í•„ë“œ ì €ì¥ ì²˜ë¦¬
  - `update` ë©”ì„œë“œì—ì„œ `details` í•„ë“œ ì €ì¥ ì²˜ë¦¬

## ğŸ“Š ìƒì„±ëœ í…Œì´ë¸” êµ¬ì¡°

### `body_composition_standards`
- ì—°ë ¹ëŒ€ë³„, ì„±ë³„ë³„ ì²´ì§€ë°©ë¥  ì ì • ë²”ìœ„ ë° ê³¨ê²©ê·¼ëŸ‰ ìµœì†Œ ê¸°ì¤€
- ë‚¨ì„±/ì—¬ì„± ê° 4ê°œ ì—°ë ¹ëŒ€ ê¸°ì¤€ ë°ì´í„° ì‚½ì… ì™„ë£Œ

### `assessment_grade_constants`
- í‰ê°€ ë“±ê¸‰ ì²´ê³„ ì •ì˜
- ì•ˆì •ì (80ì ), ë¬´ë‚œí•¨(60ì ), ì œí•œ ìˆìŒ(40ì ), ì¤€ë¹„ í•„ìš”(20ì ) ë°ì´í„° ì‚½ì… ì™„ë£Œ

### `assessment_category_scores`
- ì¹´í…Œê³ ë¦¬ë³„ ì…ë ¥ ë“±ê¸‰ì— ëŒ€í•œ ë‚´ë¶€ ì ìˆ˜ ë§¤í•‘
- í•˜ì²´ ê·¼ë ¥, ì‹¬í ì§€êµ¬ë ¥, ê·¼ì§€êµ¬ë ¥, ì•ˆì •ì„± ë“±ê¸‰-ì ìˆ˜ ë§¤í•‘ ë°ì´í„° ì‚½ì… ì™„ë£Œ

### `flexibility_item_weights`
- ìœ ì—°ì„± í•­ëª©ë³„ ê°€ì¤‘ì¹˜
- ì–´ê¹¨(1.3), ê³ ê´€ì ˆ(1.2), ì¢Œì „êµ´(1.0), í–„ìŠ¤íŠ¸ë§(0.8) ë°ì´í„° ì‚½ì… ì™„ë£Œ

### `flexibility_grade_thresholds`
- ìœ ì—°ì„± ë“±ê¸‰ íŒì • ê¸°ì¤€ (ê°€ì¤‘ì¹˜ í•© ë²”ìœ„)
- ê°€ì¤‘ì¹˜ í•© 0, 1.0~1.5, 1.6~2.5, 2.6 ì´ìƒ ê¸°ì¤€ ë°ì´í„° ì‚½ì… ì™„ë£Œ

## ğŸ”„ ë‹¤ìŒ ë‹¨ê³„

### ê³„ì‚° ë¡œì§ êµ¬í˜„ (ì˜ˆì •)

1. ë“±ê¸‰ ê¸°ë°˜ ì ìˆ˜ ê³„ì‚° ë¡œì§ êµ¬í˜„
   - `assessment_category_scores` í…Œì´ë¸”ì—ì„œ ë“±ê¸‰-ì ìˆ˜ ë§¤í•‘ ì¡°íšŒ
   - ìœ ì—°ì„± ê°€ì¤‘ì¹˜ í•© ê³„ì‚° ë° ë“±ê¸‰ íŒì •
   - ì²´ì„±ë¶„ ì—°ë ¹ëŒ€ë³„ ê¸°ì¤€ ë¹„êµ ë° ì ìˆ˜ ê³„ì‚°

2. ì´ˆê¸° í‰ê°€ í•­ëª© ìƒìˆ˜ ì •ì˜
   - `src/common/constants/initial-assessment-items.ts` ìƒì„±

3. ëŒ€ì²´ í•­ëª© ë¡œì§ êµ¬í˜„
   - ì²´ì¤‘ ìŠ¤ì¿¼íŠ¸ ë¶ˆê°€ ì‹œ ë°•ìŠ¤/ê³ ë¸”ë¦¿ ìŠ¤ì¿¼íŠ¸ë¡œ ëŒ€ì²´
   - ì ìˆ˜ ê³„ì‚° ì‹œ ëŒ€ì²´ í•­ëª©ë§Œ ì‚¬ìš©

## ğŸ“ ì°¸ê³ 

- ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼: `database/migrations/run_all_assessment_migrations_dbeaver.sql`
- ìƒì„¸ ê°€ì´ë“œ: `docs/ASSESSMENT_DB_AND_PLAN.md`

